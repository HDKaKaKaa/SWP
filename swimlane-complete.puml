@startuml Swimlane Diagram - Complete Process Flow
!theme plain
skinparam backgroundColor #FFFFFF
skinparam defaultFontSize 10
skinparam rectangle {
    BorderColor #000000
    FontColor #000000
    BackgroundColor #E8F4F8
}

skinparam diamond {
    BorderColor #000000
    FontColor #000000
    BackgroundColor #FFF4E6
}

skinparam startEnd {
    BorderColor #000000
    FontColor #000000
    BackgroundColor #E8F5E9
}

skinparam arrow {
    Color #000000
    Thickness 1
}

skinparam note {
    BackgroundColor #FFFDE7
    BorderColor #000000
}

title Swimlane Diagram - Quy trình Đặt hàng và Giao hàng (Chi tiết)

|#LightBlue|Customer|
start
:Chọn nhà hàng & món ăn;
:Thêm vào giỏ hàng;
:Chọn địa chỉ giao hàng;
:Thanh toán;
:Tạo đơn hàng\nStatus: PENDING;

|#LightYellow|Owner|
:Nhận thông báo đơn mới;
:Xem chi tiết đơn hàng;
if (Xác nhận đơn hàng?) then (Có)
  :Chuẩn bị món ăn\nStatus: PREPARING;
  note right: Cập nhật\nrestaurantAcceptedAt
else (Không)
  :Từ chối đơn hàng\nStatus: CANCELLED;
  stop
endif

|#LightGreen|Shipper|
:Xem danh sách đơn có sẵn\n(Status = PREPARING);
if (Nhận đơn hàng?) then (Có)
  :Nhận đơn hàng\nStatus: SHIPPING;
  note right: Cập nhật\nshippedAt
  :Đến nhà hàng;
  :Bắt đầu giao hàng;
  note right: Cập nhật\ndeliveryStartedAt
  :Giao đến khách hàng;
  :Hoàn thành\nStatus: COMPLETED;
  note right: Cập nhật\ncompletedAt
else (Không)
  :Không nhận đơn;
  :Quay lại xem đơn có sẵn;
endif

|#LightCoral|Admin|
:Nhận thông báo đơn hoàn thành;
:Đánh giá nhà hàng & shipper\n(nếu cần);

|Customer|
:Nhận thông báo đơn hoàn thành;
:Xem đơn hàng đã hoàn thành;
if (Đã đánh giá chưa?) then (Chưa)
  :Đánh giá nhà hàng & shipper;
  note right: Tạo Feedback
else (Rồi)
endif
stop

@enduml


